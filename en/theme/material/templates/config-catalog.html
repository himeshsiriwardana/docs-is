<!--
 * Copyright (c) 2024, WSO2 LLC. (https://www.wso2.com).
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

{% extends "base.html" %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" href="{{ 'assets/css/config-catalog.css' | url }}">
{% endblock %}

{% block container %}

    <div class="md-content" data-md-component="content">
    <article class="md-content__inner md-typeset">

      <h1 id="configuration-catalog">
        Configuration catalog
        <a class="headerlink" href="#configuration-catalog" title="Permanent link">¶</a>
      </h1>

      <p>
        The configuration model of WSO2 Identity Server is based on the toml format.
        The <code>&lt;IS_HOME&gt;/repository/conf/deployment.toml</code> file is the single source used to configure and tune various features.
      </p>

      <p>
        This document describes all the configuration parameters used in {{ config.extra.product_name }}.
      </p>

      <div class="mb-task-filter">
        <label for="mbTaskSelect">I want to:</label>
        <select id="mbTaskSelect">
          <option value="">All configurations</option>
          <option value="minimum-required">Configure the minimum required settings</option>
          <option value="connect-database">Connect an external database</option>
          <option value="enable-oauth">Enable OAuth for applications</option>
        </select>
        <button type="button" id="mbTaskClear">Clear</button>
      </div>


      {% for section in config.extra.configuration_catalog.sections %}
        <h2 id="{{ section.hyperlink }}">
          {{ section.title }}
          <a class="headerlink" href="#{{ section.hyperlink }}" title="Permanent link">¶</a>
        </h2>

        <div class="mb-config-catalog">
          <section>
            <div class="mb-config-options">
              <div class="superfences-tabs">
                <input type="checkbox" id="toggle-{{ section.id }}" class="toggle-checkbox" />
                <label for="toggle-{{ section.id }}" class="toggle-label"></label>
                <i class="icon fa fa-code"></i>

                <div class="superfences-content">
                  <div class="mb-config-example">
                    <pre><code class="language-toml">[{{ section.id }}]
{% for param in section.configs -%}
{{ param.key }} = {{ param.default }}
{% endfor -%}
</code></pre>
                  </div>
                </div>
              </div>

              <div class="doc-wrapper">
                <div class="mb-config">
                  <div class="config-wrap">
                    <code>[{{ section.id }}]</code>
                    <span class="badge-required">Required</span>
                    <p>{{ section.description }}</p>
                  </div>

                  <div class="params-wrap">
                    {% for param in section.configs %}
                      <div class="param">
                        <div class="param-name">
                          <span class="param-name-wrap">
                            <code>{{ param.key }}</code>
                          </span>
                        </div>

                        <div class="param-info">
                          <div>
                            <p>
                              <span class="param-type string">{{ param.type }}</span>
                              {% if param.required %}
                                <span class="badge-required">Required</span>
                              {% endif %}
                            </p>
                          </div>

                            <div class="param-default">
                              <span class="param-default-value">
                                Default: <code>{{ param.default }}</code>
                              </span>
                            </div>
                            {% if param.possible_values %}
                            <div class="param-possible">
                              <span class="param-possible-values">
                                Possible values: <code>{{ param.possible_values | join(', ') }}</code>
                              </span>
                            </div>
                            {% endif %}
                            <div class="param-description">
                              <p>{{ param.description }}</p>
                          </div>
                        </div>
                      </div>
                    {% endfor %}
                  </div>

                </div>
              </div>

            </div>
          </section>
        </div>
      {% endfor %}

    </article>
  </div>

{% endblock %}

